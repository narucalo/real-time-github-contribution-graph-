{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{io}from'socket.io-client';import{GitHubUsernameInput,ContributionHeatmap}from'.';import useAlert from'../hooks/useAlert';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const GitHubContributionFetcher=()=>{const[data,setData]=useState(null);const[loading,setLoading]=useState(false);const{alert,showAlert,hideAlert}=useAlert();useEffect(()=>{// Establish WebSocket connection\nconst socket=io('http://localhost:5000');// Listen for updates from the backend\nsocket.on('update',newData=>{console.log('Received new data:',newData);setData(newData);});// Clean up on component unmount\nreturn()=>socket.disconnect();},[]);const fetchContributions=async(username,startDate,endDate)=>{setLoading(true);hideAlert();try{const response=await axios.get('/api/contributions',{params:{username,start_date:startDate,end_date:endDate}});setData(response.data.contributions);}catch(error){showAlert({text:'Failed to fetch data. Please try again.',type:'danger'});}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(GitHubUsernameInput,{onSubmit:fetchContributions}),loading&&/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}),alert.show&&/*#__PURE__*/_jsx(\"p\",{className:`alert alert-${alert.type}`,children:alert.text}),data&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Contribution Heatmap\"}),/*#__PURE__*/_jsx(ContributionHeatmap,{data:data})]})]});};export default GitHubContributionFetcher;","map":{"version":3,"names":["React","useState","useEffect","axios","io","GitHubUsernameInput","ContributionHeatmap","useAlert","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","GitHubContributionFetcher","data","setData","loading","setLoading","alert","showAlert","hideAlert","socket","on","newData","console","log","disconnect","fetchContributions","username","startDate","endDate","response","get","params","start_date","end_date","contributions","error","text","type","children","onSubmit","show","className"],"sources":["C:/Users/Nam/Desktop/real-time-github-contribution-graph/frontend/src/components/GitHubContributionFetcher.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { io } from 'socket.io-client';\r\nimport { GitHubUsernameInput, ContributionHeatmap } from '.';\r\nimport useAlert from '../hooks/useAlert';\r\n\r\nconst GitHubContributionFetcher = () => {\r\n    const [data, setData] = useState(null);\r\n    const [loading, setLoading] = useState(false);\r\n    const { alert, showAlert, hideAlert } = useAlert();\r\n\r\n    useEffect(() => {\r\n        // Establish WebSocket connection\r\n        const socket = io('http://localhost:5000');\r\n\r\n        // Listen for updates from the backend\r\n        socket.on('update', (newData) => {\r\n            console.log('Received new data:', newData);\r\n            setData(newData);\r\n        });\r\n\r\n        // Clean up on component unmount\r\n        return () => socket.disconnect();\r\n    }, []);\r\n\r\n    const fetchContributions = async (username, startDate, endDate) => {\r\n        setLoading(true);\r\n        hideAlert();\r\n        try {\r\n            const response = await axios.get('/api/contributions', {\r\n                params: {\r\n                    username,\r\n                    start_date: startDate,\r\n                    end_date: endDate\r\n                }\r\n            });\r\n            setData(response.data.contributions);\r\n        } catch (error) {\r\n            showAlert({ text: 'Failed to fetch data. Please try again.', type: 'danger' });\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <GitHubUsernameInput onSubmit={fetchContributions} />\r\n            {loading && <p>Loading...</p>}\r\n            {alert.show && <p className={`alert alert-${alert.type}`}>{alert.text}</p>}\r\n            {data && (\r\n                <>\r\n                    <h2>Contribution Heatmap</h2>\r\n                    <ContributionHeatmap data={data} />\r\n                </>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default GitHubContributionFetcher;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,EAAE,KAAQ,kBAAkB,CACrC,OAASC,mBAAmB,CAAEC,mBAAmB,KAAQ,GAAG,CAC5D,MAAO,CAAAC,QAAQ,KAAM,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,QAAA,IAAAC,SAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEzC,KAAM,CAAAC,yBAAyB,CAAGA,CAAA,GAAM,CACpC,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGf,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAACgB,OAAO,CAAEC,UAAU,CAAC,CAAGjB,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAAEkB,KAAK,CAAEC,SAAS,CAAEC,SAAU,CAAC,CAAGd,QAAQ,CAAC,CAAC,CAElDL,SAAS,CAAC,IAAM,CACZ;AACA,KAAM,CAAAoB,MAAM,CAAGlB,EAAE,CAAC,uBAAuB,CAAC,CAE1C;AACAkB,MAAM,CAACC,EAAE,CAAC,QAAQ,CAAGC,OAAO,EAAK,CAC7BC,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAEF,OAAO,CAAC,CAC1CR,OAAO,CAACQ,OAAO,CAAC,CACpB,CAAC,CAAC,CAEF;AACA,MAAO,IAAMF,MAAM,CAACK,UAAU,CAAC,CAAC,CACpC,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAC,kBAAkB,CAAG,KAAAA,CAAOC,QAAQ,CAAEC,SAAS,CAAEC,OAAO,GAAK,CAC/Db,UAAU,CAAC,IAAI,CAAC,CAChBG,SAAS,CAAC,CAAC,CACX,GAAI,CACA,KAAM,CAAAW,QAAQ,CAAG,KAAM,CAAA7B,KAAK,CAAC8B,GAAG,CAAC,oBAAoB,CAAE,CACnDC,MAAM,CAAE,CACJL,QAAQ,CACRM,UAAU,CAAEL,SAAS,CACrBM,QAAQ,CAAEL,OACd,CACJ,CAAC,CAAC,CACFf,OAAO,CAACgB,QAAQ,CAACjB,IAAI,CAACsB,aAAa,CAAC,CACxC,CAAE,MAAOC,KAAK,CAAE,CACZlB,SAAS,CAAC,CAAEmB,IAAI,CAAE,yCAAyC,CAAEC,IAAI,CAAE,QAAS,CAAC,CAAC,CAClF,CAAC,OAAS,CACNtB,UAAU,CAAC,KAAK,CAAC,CACrB,CACJ,CAAC,CAED,mBACIL,KAAA,QAAA4B,QAAA,eACIhC,IAAA,CAACJ,mBAAmB,EAACqC,QAAQ,CAAEd,kBAAmB,CAAE,CAAC,CACpDX,OAAO,eAAIR,IAAA,MAAAgC,QAAA,CAAG,YAAU,CAAG,CAAC,CAC5BtB,KAAK,CAACwB,IAAI,eAAIlC,IAAA,MAAGmC,SAAS,CAAE,eAAezB,KAAK,CAACqB,IAAI,EAAG,CAAAC,QAAA,CAAEtB,KAAK,CAACoB,IAAI,CAAI,CAAC,CACzExB,IAAI,eACDF,KAAA,CAAAF,SAAA,EAAA8B,QAAA,eACIhC,IAAA,OAAAgC,QAAA,CAAI,sBAAoB,CAAI,CAAC,cAC7BhC,IAAA,CAACH,mBAAmB,EAACS,IAAI,CAAEA,IAAK,CAAE,CAAC,EACrC,CACL,EACA,CAAC,CAEd,CAAC,CAED,cAAe,CAAAD,yBAAyB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}